<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started (New User Guide) &mdash; Mines Research Computing  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=359985c6" />

  
    <link rel="canonical" href="https://rc-docs.mines.edu/pages/user_guides/new_user_guide.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Connecting to Mines@HPC Systems" href="connecting_to_systems.html" />
    <link rel="prev" title="Publications using Mines HPC Systems" href="../publications.html" />
<!-- Google Tag Manager -->

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':

new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],

j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=

'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);

})(window,document,'script','dataLayer','GTM-MXJV3MB');</script>

<!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav">
<!-- Google Tag Manager (noscript) -->

<noscript><iframe src=https://www.googletagmanager.com/ns.html?id=GTM-MXJV3MB

height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager (noscript) -->


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/Mines-RC-03.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of Research Computing at Mines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems.html">Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies.html">Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../computing_options.html">Computing Options at Mines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../consultations.html">Research Computing Consultation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module_system.html">The Module System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workshops.html">Workshops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications using Mines HPC Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started (New User Guide)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mines-gitlab-repository-for-scripts">Mines Gitlab Repository for Scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-an-hpc-system-via-ssh">Connecting to an HPC System via SSH</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux-and-macos">Linux and MacOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-command-line-and-filesystem">Introduction to Command Line and Filesystem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filesystem-basics">Filesystem Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-basics-for-navigating-the-filesystem">Command Line Basics for Navigating the Filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#choosing-a-text-editor">Choosing a text editor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-jobs">Running Jobs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#slurm-hpc-job-scheduler">Slurm: HPC Job Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slurm-job-management-and-policy">Slurm Job Management and Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-your-first-compiled-job-hello-world">Running your first compiled job - Hello World!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#an-introduction-to-the-module-system">An Introduction to the Module System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#important-module-commands">Important Module commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-jobs-with-modules">Running jobs with modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hello-world-using-mpi">Hello World! Using MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-using-python">[OPTIONAL] Using Python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-your-own-environment-using-anaconda">Creating your own environment using Anaconda</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deactivating-your-conda-environment">Deactivating your conda environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-python-with-slurm">Running Python with Slurm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#post-processing-and-visualizing-data-on-hpc">Post-processing and Visualizing Data on HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transferring-data-off-hpc-systems">Transferring data off HPC systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#transferring-files-on-windows-or-without-command-line">Transferring files on Windows or without command line</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="connecting_to_systems.html">Connecting to Mines&#64;HPC Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_environments.html">Using Anaconda for python environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">Running MATLAB on HPC Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_specific_examples.html">Job Specific Examples (Under Construction)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_slurm_guide.html">Advanced Slurm Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_efficiency_xdmod.html">Knowing your job efficiency</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parallel_Scaling_Guide.html">Parallel Scaling Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="Parallel_Scaling_Guide.html#References">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="archived_guides.html">Archived Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Budget Guidance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../budget_guidance/research_computing_resource_guidance.html">Research Computing Guidance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../budget_guidance/guidance-case-study-fenics.html">Case Study: Researcher using Open Source Finite Element Code FEniCS for modeling reacting flows</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Mines Research Computing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started (New User Guide)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pages/user_guides/new_user_guide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started-new-user-guide">
<h1>Getting Started (New User Guide)<a class="headerlink" href="#getting-started-new-user-guide" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>In this new users guide, we will go through the basics of using the HPC systems at Mines. This includes logging into the systems via ssh, navigating the filesystem and learning how job submission works using the SLURM scheduler. If you need more help after this guide, please refer to the FAQ and User Guide pages. Additionally, you can also request help through the Mines Help Center by <a class="reference external" href="https://helpcenter.mines.edu/TDClient/1946/Portal/Requests/TicketRequests/NewForm?ID=4GCQlvW5OYk_&amp;amp;RequestorType=Service">submitting a ticket</a>.</p>
<section id="mines-gitlab-repository-for-scripts">
<h3>Mines Gitlab Repository for Scripts<a class="headerlink" href="#mines-gitlab-repository-for-scripts" title="Link to this heading"></a></h3>
<p>All scripts from this guide are provided on our on-site Mines Gitlab instance.</p>
<blockquote>
<div><p>Note that you must be logged into the Mines VPN to gain access to the Mines Gitlab Instance. Instructions to connect to the Mines VPN are <a class="reference external" href="https://helpcenter.mines.edu/TDClient/1946/Portal/KB/ArticleDet?ID=133729">here</a></p>
</div></blockquote>
<p>To copy this directory, simply use the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitlab</span><span class="o">.</span><span class="n">mines</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">mineshpc</span><span class="o">/</span><span class="n">hpc</span><span class="o">-</span><span class="n">job</span><span class="o">-</span><span class="n">examples</span><span class="o">/-/</span><span class="n">archive</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">hpc</span><span class="o">-</span><span class="n">job</span><span class="o">-</span><span class="n">examples</span><span class="o">-</span><span class="n">main</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>Then you can untar the tarball and access all files from the repository.</p>
<p>Alternatively, you can clone it using git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitlab</span><span class="o">.</span><span class="n">mines</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">mineshpc</span><span class="o">/</span><span class="n">hpc</span><span class="o">-</span><span class="n">job</span><span class="o">-</span><span class="n">examples</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Note that you also get copies of our other resources, such as files from our other advanced workflows for Slurm.</p>
</section>
</section>
<section id="connecting-to-an-hpc-system-via-ssh">
<h2>Connecting to an HPC System via SSH<a class="headerlink" href="#connecting-to-an-hpc-system-via-ssh" title="Link to this heading"></a></h2>
<section id="linux-and-macos">
<h3>Linux and MacOS<a class="headerlink" href="#linux-and-macos" title="Link to this heading"></a></h3>
<p>Connecting to and using Mines’ HPC systems requires knowledge of the command line. The first step will be opening the terminal on your operating system. On Mac systems, the quickest way is to use the ‘Spotlight’ search by pressing ‘Command + Space’ on your keyboard and typing ‘Terminal’. Most Linux systems will also have a terminal app preinstalled. Once you have the terminal open, you can login using the ssh command. If you are on the Mines network, either on-campus, or connected to the Mines VPN, you can type the command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ssh username@name-of-hpc-system.mines.edu
</pre></div>
</div>
<p>and enter your Mines Multipass password.</p>
<p>For example, if you have an account on Wendian and your username is janedoe,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ssh janedoe@wendian.mines.edu 
</pre></div>
</div>
<p>Mines’ IT infrastructure allows one into Mines HPC systems through an ssh ‘jumpbox’ if you’re not connected to the Mines Network. To do so, you first need to ssh into jumpbox by typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ssh username@pvm-jumpbox.mines.edu 
</pre></div>
</div>
<p>If you have multi-factor authentication (MFA) enabled, you will be asked for your one-time password (OTP) here as well in addition to your Mines MultiPass password. Once logged in, you can log into a Mines HPC system as normal.</p>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading"></a></h3>
<p>On Windows, we either recommend using mobaxterm or setting up Windows Subsystem for Linux (WSL) so you can follow the Linux/Mac instructions above. Note that WSL requires administrator privileges on your Windows machine to set it up. As of the April 2018 update, Windows Powershell now provides SSH by default.</p>
</section>
</section>
<section id="introduction-to-command-line-and-filesystem">
<h2>Introduction to Command Line and Filesystem<a class="headerlink" href="#introduction-to-command-line-and-filesystem" title="Link to this heading"></a></h2>
<p>In this section, we will go through the basics of how to use the command line to navigate the filesystem. We will also briefly describe aspects of the filesystem that are important to keep your work organized and adhere to HPC policy.</p>
<section id="filesystem-basics">
<h3>Filesystem Basics<a class="headerlink" href="#filesystem-basics" title="Link to this heading"></a></h3>
<p>For both HPC systems, there is a basic filesystem structure with designated paths for various types of files. Upon login to either Wendian or Mio, typing ls, you should see the following too directories: bins and scratch.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Useful Environment Variables
Directory 	Environmental variable
Home directory 	$HOME
$HOME/bins 	$BINS
$HOME/scratch 	$SCRATCH
</pre></div>
</div>
<p>Your home directory is where you can store any personal files, scripts, and programs that you need to keep long term. The bins is a place to store compiled programs and executables that you need to run for jobs. As the name implies, scratch is the scratch directory used for temporary files needed for running jobs.</p>
<blockquote>
<div><p>It is HPC policy to make sure that job data is run under your scratch directory. Users who do not follow this may receive notice or warnings from HPC staff.</p>
</div></blockquote>
</section>
<section id="command-line-basics-for-navigating-the-filesystem">
<h3>Command Line Basics for Navigating the Filesystem<a class="headerlink" href="#command-line-basics-for-navigating-the-filesystem" title="Link to this heading"></a></h3>
<p>In order to manage, edit and run files on an HPC system, you will need to learn the basics of the Unix/Linux command line. There are many guides online on learning how to do this, but we will provide some basic commands in the tables below. For more information, please take a look at the guides mentioned below:</p>
<ul class="simple">
<li><p>Ubuntu Command Line For Beginners Guide</p></li>
<li><p>Oracle Advanced Linux Command Mastery</p></li>
</ul>
<p>The table below summarizes all the basic commands you need to navigaate the file system:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-lah</span></code></p></td>
<td><p>shows list (<code class="docutils literal notranslate"><span class="pre">-l</span></code>) of all files/directories, including hidden ones (<code class="docutils literal notranslate"><span class="pre">-a</span></code>), in current directory with human-readable (<code class="docutils literal notranslate"><span class="pre">-h</span></code>) file sizes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pwd</span></code></p></td>
<td><p>prints out the path of the current working directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cd</span></code></p></td>
<td><p>changes your directory to your home directory (on most Linux/Mac machines, this will be <code class="docutils literal notranslate"><span class="pre">/home/username</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code></p></td>
<td><p>changes your directory down one directory on the path, e.g. if you’re at <code class="docutils literal notranslate"><span class="pre">/home/username,</span> <span class="pre">&quot;</span></code>cd ..<code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">will</span> <span class="pre">take</span> <span class="pre">you</span> <span class="pre">to</span> </code>/home`</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$directory-path</span></code></p></td>
<td><p>changes to directory at <code class="docutils literal notranslate"><span class="pre">$directory-path</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">$directory-name</span></code></p></td>
<td><p>creates a directory in your current working directory called <code class="docutils literal notranslate"><span class="pre">$directory-name</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">$directory-path</span></code></p></td>
<td><p>creates a directory located at <code class="docutils literal notranslate"><span class="pre">$directory-path</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">$directory-path=&quot;/home/Documents/&quot;</span></code> would move you to <code class="docutils literal notranslate"><span class="pre">/home/Documents</span></code> as your current working directory)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">$filename</span> <span class="pre">$new_file_location</span></code></p></td>
<td><p>copies <code class="docutils literal notranslate"><span class="pre">$filename</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">$filename=&quot;/home/Documents/foo.txt&quot;</span></code> would copy the file to <code class="docutils literal notranslate"><span class="pre">$new_file_location</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">$new_file_location=&quot;/home/Documents/New/foo.txt&quot;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mv</span> <span class="pre">$filename</span> <span class="pre">$new_file_location</span></code></p></td>
<td><p>moves <code class="docutils literal notranslate"><span class="pre">$filename</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">$filename=&quot;/home/Documents/foo.txt&quot;</span></code> would copy the file to <code class="docutils literal notranslate"><span class="pre">$new_file_location</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">$new_file_location=&quot;/home/Documents/New/foo.txt&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="choosing-a-text-editor">
<h3>Choosing a text editor<a class="headerlink" href="#choosing-a-text-editor" title="Link to this heading"></a></h3>
<p>When using the command line, a text editor becomes a powerful tool to create and edit job scripts, as well as modify codes on the system. There are 3 text editors that we recommend:</p>
<ul class="simple">
<li><p>nano – recommended for beginners new to command line-based text editors. A guide and shortcuts can be found on their website.</p></li>
<li><p>vim – A keyboard-centric highly customizable text editor. Recommended for advanced users who want to customize how they edit their files on the commandline. Documentation can be found here.</p></li>
<li><p>emacs – Another power user-friendly text editor. Documentation can be found here.</p></li>
</ul>
</section>
</section>
<section id="running-jobs">
<h2>Running Jobs<a class="headerlink" href="#running-jobs" title="Link to this heading"></a></h2>
<section id="slurm-hpc-job-scheduler">
<h3>Slurm: HPC Job Scheduler<a class="headerlink" href="#slurm-hpc-job-scheduler" title="Link to this heading"></a></h3>
<p>Access to compute resources on Mines’ HPC platforms in managed through a job scheduler. The job scheduler manages HPC resources by having users send jobs using scripts, asking for resources, what commands to run, and how to run them. The scheduler will launch the script on compute resources when they are available. The script consists of two parts, instructions for the scheduler and the commands that the user wants to run.</p>
<p>A sample script is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --job-name=&quot;sample&quot;
#SBATCH --nodes=2
#SBATCH --ntasks-per-node=4
#SBATCH --ntasks=8
#SBATCH --export=ALL
#SBATCH --time=01:00:00

cd $SCRATCH
ls &gt; myfiles
srun hostname
</pre></div>
</div>
<p>The lines that begin with <code class="docutils literal notranslate"><span class="pre">#SBATCH</span></code> are instructions to the scheduler. In order:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">–-job-name=”sample”</span></code> – You are naming the job</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">–-nodes=2</span></code> – You are telling the scheduler that you want to run on two nodes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">–-ntasks-per-node=4</span></code> – You want to run four tasks per node for a total of 8 tasks. (The —ntasks-per-node line is redundant in this case.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">–-export=ALL</span></code> – All your environmental variables setting will passed to the compute nodes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">–-time=01:00:00</span></code> – You will run no longer than 1 hr.</p></li>
</ol>
<p>The last three lines are normal shell commands:</p>
<ol class="arabic simple" start="7">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SCRATCH</span></code> – You will be put in your scratch directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">&gt;</span> <span class="pre">myfiles</span></code> – A directory listing will be put in the file myfiles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">srun</span> <span class="pre">hostname</span></code> – The srun command will launch the program hostname in parallel, in this case 8 copies will be started simultaneously. Note that the ls command is not run in parallel; only a single instance will be launched.</p></li>
</ol>
<p>The script is launched using the <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> command. By default the standard output and standard error will be put in files with the names <code class="docutils literal notranslate"><span class="pre">slurm-######.out</span></code> and <code class="docutils literal notranslate"><span class="pre">slurm-######.err</span></code> respectively, where <code class="docutils literal notranslate"><span class="pre">######</span></code> is a job number. For example running this script on Wendian produces:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[username@wendian001 ~]$ sbatch dohost
Submitted batch job 363541
After some time…

[username@wendian001 ~]$ ls -lt | head
total 88120
-rw-rw-r--  1 username username        64 Sep 24 16:28 slurm-363541.out
-rw-rw-r--  1 username username      2321 Sep 24 16:28 myfiles
...

[username@wendian001 ~]$ cat slurm-363541.out
c001
c002
c001
c001
c001
c002
c002
c002
</pre></div>
</div>
<p>There are several user level commands available for managing jobs on the HPC resources. These are discussed briefly by the <strong>How do I manage jobs?</strong> on the HPC FAQs page.</p>
</section>
<section id="slurm-job-management-and-policy">
<h3>Slurm Job Management and Policy<a class="headerlink" href="#slurm-job-management-and-policy" title="Link to this heading"></a></h3>
<p>SLURM manages job priority based on variety of factors, including but not limited to: resources requested (number of nodes, memory, etc), length of job time, and prior number of jobs submitted. Mio and Wendian both have their own job policies, which you can learn more about on our FAQ page.</p>
</section>
<section id="running-your-first-compiled-job-hello-world">
<h3>Running your first compiled job - Hello World!<a class="headerlink" href="#running-your-first-compiled-job-hello-world" title="Link to this heading"></a></h3>
<p>Now that you can login, navigate the filesystem and understand the basics of the SLURM job scheduler, we are ready to send our first job to the scheduler. For the first example, we are going to show how to send a job using the simple C++ program for “Hello World”:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// Source: https://devblogs.microsoft.com/cppblog/cpp-tutorial-hello-world/
#include &quot;stdio.h&quot;
int main()
{
  std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;
  return 0;
}
</pre></div>
</div>
<p>For this program hello_world.cpp, we can compile it using the system’s C++ compiler g++:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ g++ hello_world.cpp -o hello_world.exe
</pre></div>
</div>
<p>Now, to send this job using a job script, we need to write one using the SLURM preamble definitions. A sample job script <code class="docutils literal notranslate"><span class="pre">run.slurm</span></code> for our Hello Program is below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --nodes=1 # number of nodes
#SBATCH --ntasks-per-node=1 # number of tasks per node
#SBATCH --ntasks=1 # redundant; total number of tasks: ntasks = nodes * ntasks-per-node
#SBATCH --time=00:00:01 # time in HH:MM:SS
#SBATCH -o output.%j # standard print output labeled with SLURM job id %j
#SBATCH -e error.%j  # standard print error  labeled with SLURM job id %j

echo &quot;Job has started!&quot;
srun hello_world.exe
echo &quot;Job has finished!&quot;
</pre></div>
</div>
<p>We will highlight some aspects of this SLURM script. First, the lines starting with <code class="docutils literal notranslate"><span class="pre">#SBATCH</span></code> are part of a SLURM script’s preamble. There are a multitude of options for the preamble, where you read more about on the SLURM sbatch documentation page here.</p>
<p>The command srun tells SLURM what executable to run (in this case hello_world) and how to run it using all the SLURM preamble options above.</p>
<blockquote>
<div><p>NOTE: For most cases, it is required to send your job’s executable using srun. There are a few exceptions for this rule and will be advised on a case by case basis.</p>
</div></blockquote>
<p>Now to send the job to SLURM we use <code class="docutils literal notranslate"><span class="pre">sbatch</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sbatch run.slurm
</pre></div>
</div>
<p>You should see the following printed to the screen:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Submitted batch job $JOB_ID
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">$JOB_ID</span></code> will look something like <code class="docutils literal notranslate"><span class="pre">5711043</span></code>.</p>
</section>
</section>
<section id="an-introduction-to-the-module-system">
<h2>An Introduction to the Module System<a class="headerlink" href="#an-introduction-to-the-module-system" title="Link to this heading"></a></h2>
<p>Software required for high performance computing is complex due to its web of dependencies of libraries and other scientifc software programs. Furthermore, each piece of scientific software may require dependencies that may conflict with existing libraries, or require a different version of a library completely. Hence, a modular system allows one to load and unload dependencies as needed, depending on what is required from the software.</p>
<p>On Linux systems, paths for software and their libraries are determined by setting environmental variables. You can see the settings of all variables by running the command printenv. In most cases, the most important environment variables are <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>. <code class="docutils literal notranslate"><span class="pre">PATH</span></code> is an environment variable that sets a list of directories that can be searched for finding applications. Similarly, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> defines a list of directories that will be searched to find libraries used by applications. If you enter a command and see “command not found” then it is possible the directory containing the application is not in <code class="docutils literal notranslate"><span class="pre">PATH</span></code>; a similar error occurs for <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> when it cannot find a required library. The module system is designed to easily set and unset collections of environment variables. On Mines HPC systems, this is done using the lmod module system. We will briefly describe some common important module commands and also how to use it in context of setting up and submitting a job.</p>
<section id="important-module-commands">
<h3>Important Module commands<a class="headerlink" href="#important-module-commands" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span></code> – Lists all available modules in a cascading tree format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">-r</span> <span class="pre">spider</span> <span class="pre">mpi</span></code> – Lists all modules related to “mpi” in a cascading tree format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">keyword</span> <span class="pre">gromacs</span></code> – List modules related to the gromacs program</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">apps/gromacs/gcc-ompi-plumed/2021.1</span></code> – Loads the Gromacs 2021.1 module</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">unload</span> <span class="pre">apps/gromacs/gcc-ompi-plumed/2021.1</span></code> – Unloads the Gromacs 2021.1 module</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code> – Unloads all currenty loaded modules</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">list</span></code> – Lists all currently loaded modules
Not all applications are accessible by all HPC users. Some codes are commercial and require licensing, and hence PI approval. Some require PI approval for other reasons. If you are unable to load a module, or see permission errors when executing a job, and would like to know how you might obtain access, please submit a help request.</p></li>
</ul>
<p>Some modules have dependencies that need to be manually entered. For example, the gromacs module requires that modules for the compiler and MPI be loaded first. If there is an unsatisfied dependency you will be notified.</p>
</section>
</section>
<section id="running-jobs-with-modules">
<h2>Running jobs with modules<a class="headerlink" href="#running-jobs-with-modules" title="Link to this heading"></a></h2>
<section id="hello-world-using-mpi">
<h3>Hello World! Using MPI<a class="headerlink" href="#hello-world-using-mpi" title="Link to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// Reference:  https://mpi.deino.net/mpi_functions/MPI_Init.html
#include &quot;mpi.h&quot;
#include &quot;stdio.h&quot;
using namespace std;
int main(int argc, char* argv[])
{
int rank, np;
MPI_Init(&amp;argc,&amp;argv); // initialize MPI
MPI_Comm_size(MPI_COMM_WORLD, &amp;np); // get total number of processors
MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank); // get current rank  
cout &lt;&lt; &quot;Hello World from rank &quot; &lt;&lt; rank &lt;&lt; &quot; out of &quot; &lt;&lt; np &lt;&lt; &quot; processors!&quot; &lt;&lt; endl;
MPI_Finalize(); // finalize MPI
return 0;
}
</pre></div>
</div>
<p>For the second program, we wanted to demonstrate how to use the system’s module system. This program initializes MPI, defines integer variables to store the number of processors np and the current processor/”rank”, rank, and then prints “Hello World from rank rank out of np processors!”, followed by finalizing MPI.</p>
<p>To compile this code, we need to load modules from the module system.</p>
<p>On Wendian:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ module load compilers/gcc/9.3.1 mpi/openmpi/gcc-cuda/4.1.4
</pre></div>
</div>
<p>On Mio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ module load compilers/gcc/9 mpi/openmpi/gcc/4.1.1
</pre></div>
</div>
<p>This will load a newer GCC compiler that is required for our OpenMPI library we’re going to use with the code. To compile the code, we will use the MPI-wrapped C++ compiler mpicxx:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mpicxx  hello_world.cpp -o hello_world.exe
</pre></div>
</div>
<p>A sample job script (which we will call run.slurm) to use the executable will look like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --nodes=1 # number of nodes
#SBATCH --ntasks-per-node=12 # number of tasks per node
#SBATCH --ntasks=12 # redundant; total number of tasks: ntasks = nodes * ntasks-per-node
#SBATCH --time=00:00:01 # time in HH:MM:SS
#SBATCH -o output.%j # standard print output labeled with SLURM job id %j
#SBATCH -e error.%j  # standard print error  labeled with SLURM job id %j

# If on Wendian, uncomment the line below
module load compilers/gcc/9.3.1 mpi/openmpi/gcc-cuda/4.1.4
# If on Mio, uncomment the line below
# module load compilers/gcc/9 mpi/openmpi/gcc/4.1.1

echo &quot;Job has started!&quot;
srun hello_world.exe
echo &quot;Job has finished!
</pre></div>
</div>
<p>As with the last example, we can send the job to the scheduler using the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sbatch run.slurm
</pre></div>
</div>
<p>When the job completes, you should see an output file called <code class="docutils literal notranslate"><span class="pre">output.%j</span></code> where <code class="docutils literal notranslate"><span class="pre">%j</span></code> is the job ID. The output for this job should look similar to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Job has started!
Hello, World! from rank 1 out of 12 processors!
Hello, World! from rank 3 out of 12 processors!
Hello, World! from rank 5 out of 12 processors!
Hello, World! from rank 7 out of 12 processors!
Hello, World! from rank 9 out of 12 processors!
Hello, World! from rank 10 out of 12 processors!
Hello, World! from rank 11 out of 12 processors!
Hello, World! from rank 0 out of 12 processors!
Hello, World! from rank 2 out of 12 processors!
Hello, World! from rank 4 out of 12 processors!
Hello, World! from rank 6 out of 12 processors!
Hello, World! from rank 8 out of 12 processors!
Job has finished!  
</pre></div>
</div>
</section>
<section id="optional-using-python">
<h3>[OPTIONAL] Using Python<a class="headerlink" href="#optional-using-python" title="Link to this heading"></a></h3>
<p>For many cases, Python is a popular scientific computing program language with a large library of modules to choose from. There are so many dependencies that managing python modules through the HPC module system alone would become incredibly cumbersome. As an alternative, we recommend HPC users take control of the python modules they need by creating their own environment using Anaconda. We will briefly go over how to do this below.</p>
<p>Python v2.7 was deprecated at the beginning of 2020 which means that it will no longer be updated. Linux operating systems, such as the ones used on Mines HPC systems, while currently supported, will eventually not include Python 2.7 by default. We encourage researchers to make the transition to Python 3.x as soon as they are able.</p>
<section id="creating-your-own-environment-using-anaconda">
<h4>Creating your own environment using Anaconda<a class="headerlink" href="#creating-your-own-environment-using-anaconda" title="Link to this heading"></a></h4>
<p>First step is to load the desired version Python version. We will show examples for both Wendian and Mio below.</p>
<p>On Wendian and Mio</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ module load apps/python3/2022.10
</pre></div>
</div>
<p>Then create your own python environment using the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ conda create --name my_env python=3.7
</pre></div>
</div>
<p>You should see something similiar to the following print to the screen:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Collecting package metadata (current_repodata.json): done
Solving environment: done

## Package Plan ##

environment location: /u/pa/sh/username/.conda/envs/my_env

added / updated specs:
	- python=3.7


The following packages will be downloaded:

	package                    |            build
	---------------------------|-----------------
	ca-certificates-2021.1.19  |       h06a4308_0         121 KB
	certifi-2020.12.5          |   py37h06a4308_0         141 KB
	libedit-3.1.20191231       |       h14c3975_1         116 KB
	libffi-3.3                 |       he6710b0_2          50 KB
	ncurses-6.2                |       he6710b0_1         817 KB
	openssl-1.1.1i             |       h27cfd23_0         2.5 MB
	pip-20.3.3                 |   py37h06a4308_0         1.8 MB
	python-3.7.9               |       h7579374_0        45.3 MB
	readline-8.1               |       h27cfd23_0         362 KB
	setuptools-52.0.0          |   py37h06a4308_0         710 KB
	sqlite-3.33.0              |       h62c20be_0         1.1 MB
	tk-8.6.10                  |       hbc83047_0         3.0 MB
	wheel-0.36.2               |     pyhd3eb1b0_0          33 KB
	------------------------------------------------------------
										Total:        56.0 MB

The following NEW packages will be INSTALLED:

_libgcc_mutex      pkgs/main/linux-64::_libgcc_mutex-0.1-main
ca-certificates    pkgs/main/linux-64::ca-certificates-2021.1.19-h06a4308_0
certifi            pkgs/main/linux-64::certifi-2020.12.5-py37h06a4308_0
ld_impl_linux-64   pkgs/main/linux-64::ld_impl_linux-64-2.33.1-h53a641e_7
libedit            pkgs/main/linux-64::libedit-3.1.20191231-h14c3975_1
libffi             pkgs/main/linux-64::libffi-3.3-he6710b0_2
libgcc-ng          pkgs/main/linux-64::libgcc-ng-9.1.0-hdf63c60_0
libstdcxx-ng       pkgs/main/linux-64::libstdcxx-ng-9.1.0-hdf63c60_0
ncurses            pkgs/main/linux-64::ncurses-6.2-he6710b0_1
openssl            pkgs/main/linux-64::openssl-1.1.1i-h27cfd23_0
pip                pkgs/main/linux-64::pip-20.3.3-py37h06a4308_0
python             pkgs/main/linux-64::python-3.7.9-h7579374_0
readline           pkgs/main/linux-64::readline-8.1-h27cfd23_0
setuptools         pkgs/main/linux-64::setuptools-52.0.0-py37h06a4308_0
sqlite             pkgs/main/linux-64::sqlite-3.33.0-h62c20be_0
tk                 pkgs/main/linux-64::tk-8.6.10-hbc83047_0
wheel              pkgs/main/noarch::wheel-0.36.2-pyhd3eb1b0_0
xz                 pkgs/main/linux-64::xz-5.2.5-h7b6447c_0
zlib               pkgs/main/linux-64::zlib-1.2.11-h7b6447c_3


Proceed ([y]/n)? 
Proceed by typing “y”, followed by enter. You can then activate your new environment by typing

$ source activate my_env
WARNING: Anaconda will print out to setup the environment using conda activate instead of source activate. Although this will work on the command line, the conda command will not pass the environment in a SLURM job.

You should now see (my_env) to the left on your command line like follows:

(my_env) [username@wendian001 ~]$
You can now add packages you need for your conda environment either using pip or the conda commands. For example, we can install the petsc4py package through conda-forge:

(my_env) [username@wendian ~]$ conda install -c conda-forge petsc4py
You should see something similiar print to the screen:

Collecting package metadata (current_repodata.json): done
Solving environment: done

## Package Plan ##

environment location: /u/pa/sh/username/.conda/envs/my_env

added / updated specs:
	- petsc4py


The following packages will be downloaded:

	package                    |            build
	---------------------------|-----------------
	ca-certificates-2020.12.5  |       ha878542_0         137 KB  conda-forge
	certifi-2020.12.5          |   py37h89c1867_1         143 KB  conda-forge
	hdf5-1.10.6                |nompi_h7c3c948_1111         3.1 MB  conda-forge
	hypre-2.18.2               |       hc98498a_1         1.7 MB  conda-forge
	krb5-1.17.2                |       h926e7f8_0         1.4 MB  conda-forge
	libblas-3.9.0              |       8_openblas          11 KB  conda-forge
	libcblas-3.9.0             |       8_openblas          11 KB  conda-forge
	libcurl-7.71.1             |       hcdd3856_3         302 KB  conda-forge
	libgfortran-ng-7.5.0       |      h14aa051_18          22 KB  conda-forge
	libgfortran4-7.5.0         |      h14aa051_18         1.3 MB  conda-forge
	liblapack-3.9.0            |       8_openblas          11 KB  conda-forge
	libopenblas-0.3.12         |pthreads_hb3c22a3_1         8.2 MB  conda-forge
	metis-5.1.0                |    h58526e2_1006         4.1 MB  conda-forge
	mpi-1.0                    |            mpich           4 KB  conda-forge
	mpich-3.3.2                |       h846660c_5         6.4 MB  conda-forge
	mumps-include-5.2.1        |      ha770c72_10          23 KB  conda-forge
	mumps-mpi-5.2.1            |      h12930e3_10         3.5 MB  conda-forge
	numpy-1.18.1               |   py37h8960a57_1         5.2 MB  conda-forge
	parmetis-4.0.3             |    h9f7b9cf_1005         290 KB  conda-forge
	petsc-3.13.6               |       h9a2a0d4_1         9.8 MB  conda-forge
	petsc4py-3.13.0            |   py37h66998c9_5         1.3 MB  conda-forge
	ptscotch-6.0.9             |       h294ddb0_1         1.6 MB  conda-forge
	python_abi-3.7             |          1_cp37m           4 KB  conda-forge
	scalapack-2.0.2            |    hfacbc1e_1009         2.2 MB  conda-forge
	suitesparse-5.6.0          |       h717dc36_0         2.4 MB  conda-forge
	superlu-5.2.2              |       hfe2efc7_0         218 KB  conda-forge
	superlu_dist-6.2.0         |       h5e15a89_2         900 KB  conda-forge
	------------------------------------------------------------
										Total:        54.1 MB

The following NEW packages will be INSTALLED:

hdf5               conda-forge/linux-64::hdf5-1.10.6-nompi_h7c3c948_1111
hypre              conda-forge/linux-64::hypre-2.18.2-hc98498a_1
krb5               conda-forge/linux-64::krb5-1.17.2-h926e7f8_0
libblas            conda-forge/linux-64::libblas-3.9.0-8_openblas
libcblas           conda-forge/linux-64::libcblas-3.9.0-8_openblas
libcurl            conda-forge/linux-64::libcurl-7.71.1-hcdd3856_3
libgfortran-ng     conda-forge/linux-64::libgfortran-ng-7.5.0-h14aa051_18
libgfortran4       conda-forge/linux-64::libgfortran4-7.5.0-h14aa051_18
liblapack          conda-forge/linux-64::liblapack-3.9.0-8_openblas
libopenblas        conda-forge/linux-64::libopenblas-0.3.12-pthreads_hb3c22a3_1
libssh2            conda-forge/linux-64::libssh2-1.9.0-hab1572f_5
metis              conda-forge/linux-64::metis-5.1.0-h58526e2_1006
mpi                conda-forge/linux-64::mpi-1.0-mpich
mpich              conda-forge/linux-64::mpich-3.3.2-h846660c_5
mumps-include      conda-forge/linux-64::mumps-include-5.2.1-ha770c72_10
mumps-mpi          conda-forge/linux-64::mumps-mpi-5.2.1-h12930e3_10
numpy              conda-forge/linux-64::numpy-1.18.1-py37h8960a57_1
parmetis           conda-forge/linux-64::parmetis-4.0.3-h9f7b9cf_1005
petsc              conda-forge/linux-64::petsc-3.13.6-h9a2a0d4_1
petsc4py           conda-forge/linux-64::petsc4py-3.13.0-py37h66998c9_5
ptscotch           conda-forge/linux-64::ptscotch-6.0.9-h294ddb0_1
python_abi         conda-forge/linux-64::python_abi-3.7-1_cp37m
scalapack          conda-forge/linux-64::scalapack-2.0.2-hfacbc1e_1009
scotch             conda-forge/linux-64::scotch-6.0.9-h0eec0ba_1
suitesparse        conda-forge/linux-64::suitesparse-5.6.0-h717dc36_0
superlu            conda-forge/linux-64::superlu-5.2.2-hfe2efc7_0
superlu_dist       conda-forge/linux-64::superlu_dist-6.2.0-h5e15a89_2
tbb                conda-forge/linux-64::tbb-2020.2-hc9558a2_0

The following packages will be UPDATED:

certifi            pkgs/main::certifi-2020.12.5-py37h06a~ --&gt; conda-forge::certifi-2020.12.5-py37h89c1867_1

The following packages will be SUPERSEDED by a higher-priority channel:

ca-certificates    pkgs/main::ca-certificates-2021.1.19-~ --&gt; conda-forge::ca-certificates-2020.12.5-ha878542_0


Proceed ([y]/n)?
Confirm by typing ‘y’ and pressing enter. You now should have your own Python environment with petsc4py!
</pre></div>
</div>
</section>
<section id="deactivating-your-conda-environment">
<h4>Deactivating your conda environment<a class="headerlink" href="#deactivating-your-conda-environment" title="Link to this heading"></a></h4>
<p>Once you are done with your environment, you can disable it by issuing the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ conda deactivate
</pre></div>
</div>
</section>
<section id="running-python-with-slurm">
<h4>Running Python with Slurm<a class="headerlink" href="#running-python-with-slurm" title="Link to this heading"></a></h4>
<p>We will now use this conda environment to submit a job to SLURM. The example problem is called <code class="docutils literal notranslate"><span class="pre">my_petsc4py.py</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import sys
import petsc4py
petsc4py.init(sys.argv)
from petsc4py import PETSc

# store MPI rank and size using PETSc&#39;s MPI COMM WORLD
rank = PETSc.COMM_WORLD.Get_rank()
size = PETSc.COMM_WORLD.Get_size()

print(&quot;This print statement is coming from rank &quot;, rank, &quot;out of &quot;, size, &quot; processors&quot;)
</pre></div>
</div>
<p>This simple python script will initialize PETSc environment, collect the current MPI rank and number of processors and print them based on their rank. This should look similiar to our Hello World! using MPI example above.</p>
<p>Next, we need to setup a SLURM script, which we call run.sh:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --nodes=1 # number of nodes
#SBATCH --ntasks-per-node=12 # number of tasks per node
#SBATCH --ntasks=12 # redundant; total number of tasks: ntasks = nodes * ntasks-per-node
#SBATCH --time=00:00:01 # time in HH:MM:SS
#SBATCH -o output.%j # standard print output labeled with SLURM job id %j
#SBATCH -e error.%j  # standard print error  labeled with SLURM job id %j

# load python module
module load apps/python3/2020.02

# activate conda environment required to run code
source activate my_env

echo &quot;Job has started!&quot;
srun python my_petsc4py.py
echo &quot;Job has finished!
</pre></div>
</div>
<p>Similiar to before, we can submit this to the SLURM scheduler by using the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sbatch run.sh 
</pre></div>
</div>
<p>When the job finishes, your output file should look like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Job has started!
This print statement is coming from rank  0 out of  12  processors
This print statement is coming from rank  2 out of  12  processors
This print statement is coming from rank  1 out of  12  processors
This print statement is coming from rank  3 out of  12  processors
This print statement is coming from rank  4 out of  12  processors
This print statement is coming from rank  5 out of  12  processors
This print statement is coming from rank  6 out of  12  processors
This print statement is coming from rank  7 out of  12  processors
This print statement is coming from rank  8 out of  12  processors
This print statement is coming from rank  9 out of  12  processors
This print statement is coming from rank  10 out of  12  processors
This print statement is coming from rank  11 out of  12  processors
</pre></div>
</div>
</section>
</section>
</section>
<section id="post-processing-and-visualizing-data-on-hpc">
<h2>Post-processing and Visualizing Data on HPC<a class="headerlink" href="#post-processing-and-visualizing-data-on-hpc" title="Link to this heading"></a></h2>
<p>After your job completes, you may want to figure out how you want to post-process and visualize your data. In many cases, HPC is not necessary and many users prefer transferring their data and postprocessing &amp; visualizating their data locally. However, you need to leverage the compute or GPU nodes to do visualization, please go to our Visualization page to learn more.</p>
</section>
<section id="transferring-data-off-hpc-systems">
<h2>Transferring data off HPC systems<a class="headerlink" href="#transferring-data-off-hpc-systems" title="Link to this heading"></a></h2>
<p>For transferring data off Mines HPC systems, we recommend the following command line programs: scp and rsync. Each of these commands serve a similar purpose, but function differently in practice.</p>
<p>The name scp stands for secure copy. The general syntax for <code class="docutils literal notranslate"><span class="pre">scp</span></code> to transfer a file from an HPC system to a local directory is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ scp  
</pre></div>
</div>
<p>For example, if you wanted to transfer the file <code class="docutils literal notranslate"><span class="pre">~/scratch/foo.txt</span></code> from Wendian to your local home directory <code class="docutils literal notranslate"><span class="pre">/home/username</span></code>, you would type (while not logged into any HPC system in your terminal):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ scp username@wendian.mines.edu:~/scratch/foo.txt /home/username 
</pre></div>
</div>
<p>Conversely, if you needed to transfer foo.txt back to Wendian, you would type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ scp /home/username/foo.txt  username@wendian.mines.edu:~/scratch 
</pre></div>
</div>
<p>If you need to send an entire directory, scp provides the recursive flag <code class="docutils literal notranslate"><span class="pre">-r</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ scp -r  /home/username/foo_bar  username@wendian.mines.edu:~/scratch 
</pre></div>
</div>
<p>This will transfer the directory foo_bar and its contents to ~/scartch/foo_bar</p>
<p>There are many other options you can use for scp, which can be found here or by typing man scp in your command line.</p>
<p>In some cases, you may want to transfer an entire directory, but know that many of the files in that directory haven’t changed. That is, you want to sync the files incremently based only on the files that changed. For these instances, it is recommended to use rsync. Recommended syntax for using rsync recursively is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rsync --rsh=ssh -rvP username@remote_host:/path/to/source /path/to/destination
</pre></div>
</div>
<p>The flag –rsh=ssh ensures rsync uses ssh. -rvP will recursively pull files from the directory (<code class="docutils literal notranslate"><span class="pre">-r</span></code>), with verbose output to the screen (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) and allow for partial transfers (<code class="docutils literal notranslate"><span class="pre">-P)</span></code> in case an interruption or a restart. For example, to transfer the directory foo_bar2 from Wendian to your local directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ rsync --rsh=ssh -rvP username@wendian.mines.edu:~/scratch/foo_bar2 /home/username
</pre></div>
</div>
<section id="transferring-files-on-windows-or-without-command-line">
<h3>Transferring files on Windows or without command line<a class="headerlink" href="#transferring-files-on-windows-or-without-command-line" title="Link to this heading"></a></h3>
<p>For transferring files without the use of the command line, such as on Windows, both Mio and Wendian support the FTP protocol. For FTP transfers, we recommend Filezilla, since it is cross-platform for Windows, MacOS and Linux.
You may also use the web portal <a class="reference external" href="https://wendian-ondemand.mines.edu">wendian-ondemand.mines.edu</a> or <a class="reference external" href="https://mio-ondemand.mines.edu">mio-ondemand.mines.edu</a> -&gt; Files tab and the -&gt; Clusters tab for Shell Access to get a terminal.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../publications.html" class="btn btn-neutral float-left" title="Publications using Mines HPC Systems" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="connecting_to_systems.html" class="btn btn-neutral float-right" title="Connecting to Mines@HPC Systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
<jinja2.runtime.BlockReference object at 0x7fc37be80e80>
  <footer role="contentinfo">
  <div class="column left">
   <h3><br><strong>Mines Research Computing</strong><hr></h3>

<big><strong><a href="https://rc.mines.edu"><u>Research Computing (RC)</u></a></strong><br>
          Colorado School of Mines<br>
          1500 Illinois St., Golden, CO 80401<br>
          303-273-3000 / 800-446-9488 </big>
  </div>
 
   <div class="column middle">
<h3><br><strong>Quick Links</strong><hr></h3>
<big>
  <ul> 
    <li><a href="https://outlook.office365.com/owa/calendar/ResearchComputing@mines0.onmicrosoft.com/bookings/"><u>Schedule a Meeting</u></a></li>
    <li><a href="https://helpcenter.mines.edu/TDClient/1946/Portal/Requests/TicketRequests/NewForm?ID=4GCQlvW5OYk_&RequestorType=Service"><u>Submit an RC ticket</u></a></li>
    <li><a href="https://helpcenter.mines.edu"><u>Mines Help Center</u></a></li>
  </ul>
</big>
<hr>
<big>
  <ul>  
    <li><a href="https://ask.cyberinfrastructure.org/"><u>Ask.Ci</u></a> (External)</li>
    <li><a href="https://its.mines.edu/"><u>Mines ITS</u></a></li>
    <li><a href="https://library.mines.edu/"><u>Mines Library</u></a></li>
</ul>
</big>




</div>
  <div class="column right">
<h3><br><strong>About RC</strong><hr></h3>
<p>ITS’ Research Computing (RC) group works to identify research needs across the university and aims to provide comprehensive and innovative services and infrastructure to further research and meet our vision set by the Mines@150 strategic plan. <br>
</p><hr>

<p></p>
</div>


<div>
  <div><p style="text-align: center"><big><a href="https://www.mines.edu" target="_blank" ">Mines Home</a> <strong>|</strong> <a href="https://www.mines.edu/accessibility" target="_blank" ">Accessibility</a> <strong>|</strong> <a href="https://www.mines.edu/privacy" target="_blank" ">Privacy</a> <strong>|</strong> © 2022-24 Colorado School of Mines</big></p></div></div></div>  
      </div>
    
  </footer>

  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 
   


</body>
</html>